#!/bin/bash

# Convert from custom base to decimal
decode() {
  local input="$1"
  local base_chars="$2"
  local base=${#base_chars}
  local value=0
  for ((i=0; i<${#input}; i++)); do
    c=${input:i:1}
    pos=$(expr index "$base_chars" "$c")
    ((pos--))  # expr index is 1-based
    value=$((value * base + pos))
  done
  echo "$value"
}

# Convert from decimal to custom base
encode() {
  local number=$1
  local base_chars="$2"
  local base=${#base_chars}
  local result=""
  while (( number > 0 )); do
    digit=$(( number % base ))
    result="${base_chars:digit:1}$result"
    number=$(( number / base ))
  done
  echo "${result:-${base_chars:0:1}}"
}

# Main logic
w_dec=$(decode "$WATER" "water")
s_dec=$(decode "$STIR" "stir.")
sum=$((w_dec + s_dec))
encode "$sum" "bestchol"
